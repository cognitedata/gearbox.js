import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { AssetTree, AssetTreeWithoutTheme } from '../AssetTree';
import { decorators, onSelect, customStyle, exampleTheme, displayIdAsName } from './helper';

<Meta title="Assets/AssetTree" decorators={decorators} />

# Asset Tree

Visualize parent-child relationship of assets in a tree structure. It will initially fetch all available root assets from the SDK. When a node is expanded, the children will be fetched dynamically

**NOTE:** The component should have `ClientSDKProvider` as a parent component in react component tree.

### Basic usage:

Imports:

```jsx
import 'antd/dist/antd.css';

import React from 'react';
import { AssetTree } from '@cognite/gearbox';

```

<Preview>
  <Story name="Basic Usage">
    <AssetTree/>
  </Story>
</Preview>

## Available props

<!-- TODO -> props auto showing not working for class components -->
<Props of={AssetTreeWithoutTheme} />

### Types

#### OnSelectAssetTreeParams

This type describes the parameters the `onSelect` function is called with.
The type can be imported from @cognite/gearbox:

```jsx
import { OnSelectAssetTreeParams } from '@cognite/gearbox';
```

#### Asset

The Asset type documentation can be found at https://cognitedata.github.io/cognite-sdk-js/classes/asset.html

#### AssetTreeStyles
This interface defines inline CSS styles for inner elements of `AssetTree` component.
You can override styles of following blocks:

<img src="asset_tree/styling_schema.jpg" alt="List Styling" width="350px"/>

The type can be imported from `@cognite/gearbox`:

```jsx
import { AssetTreeStyles } from '@cognite/gearbox';
```


See more details in `Custom Styles` example.

## Examples

### Click Item

A function can be provided to fire when an item clicked:

```jsx
import { OnSelectAssetTreeParams } from '@cognite/gearbox';

const onSelect = (e: OnSelectAssetTreeParams) => {};
```

<Preview>
  <Story name="Click Item">
    <AssetTree
      onSelect={onSelect}
    />
  </Story>
</Preview>

### Custom Styles

```jsx
const customStyle = {
  list: {
    fontFamily: 'Courier New',
    fontSize: 'large',
  },
};
```

<Preview>
  <Story name="Custom Styles">
    <AssetTree
      styles={customStyle}
    />
  </Story>
</Preview>

### Default Expanded Node

<Preview>
  <Story name="Default Expanded Node">
    <AssetTree
      defaultExpandedKeys={[6687602007296940]}
    />
  </Story>
</Preview>

### Custom Display Name

```jsx
const displayIdAsName = ({ id }: { id: number }) => `Id: ${id}`
```
<Preview>
  <Story name="Custom Display Name">
    <AssetTree
      displayName={displayIdAsName}
    />
  </Story>
</Preview>

### With Theme

```jsx
import { ThemeProvider } from 'styled-components';

const exampleTheme = {
  gearbox: {
    fontFamily: 'Courier New',
    fontSize: 'large',
    textColor: '#a88400',
    highlightColor: '#00b893',
  },
};
```
<Preview>
  <Story name="With Theme">
    <ThemeProvider theme={exampleTheme}><AssetTree /></ThemeProvider>
  </Story>
</Preview>

### With Asset Ids

<Preview>
  <Story name="With Asset Ids">
    <AssetTree
      assetIds={[6687602007296940]}
    />
  </Story>
</Preview>
