import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { AssetTimeseriesPanel } from '../AssetTimeseriesPanel';
import { decorators, customStyle, metaOptions, handleAssetTimeseriesLoaded } from './helper';

<Meta title="Assets|AssetTimeseriesPanel" decorators={decorators} />

# Asset Timeseries Panel

This component loads meta information about all timeseries related to the asset and shows them in the list.
Each item in the list can be expanded showing description, timeseries chart, current data point and metadata.
The component is used as one of the panes in `AssetMeta` component.

**NOTE:** The component should have `ClientSDKProvider` as a parent component in react component tree.

## Basic usage:

Imports:

```jsx
import 'antd/dist/antd.css';

import React from 'react';
import { AssetTimeseriesPanel } from '@cognite/gearbox';

```

<Preview>
  <Story name="Basic Usage" >
    <AssetTimeseriesPanel assetId={4650652196144007} />
  </Story>
</Preview>

## Available props

<Props of={AssetTimeseriesPanel} />

### Types

#### TimeseriesListParams

This type can be imported from `@cognite/sdk`:

```jsx
import { TimeseriesListParams } from `@cognite/sdk`;
```
#### AssetTimeseriesPanelStyles

This interface defines inline CSS styles for inner elements of `AssetTimeseriesPanel` component.

```jsx
import { AssetTimeseriesPanelStyles } from '@cognite/gearbox';
```

See more details in AssetMeta component documentation.

## Examples

### Custom Spinner
      
<Preview>
  <Story name="Custom Spinner">  
    <AssetTimeseriesPanel
      assetId={4650652196144007}
      customSpinner={<div>Loading...</div>}
    />
  </Story>
</Preview>

### Custom Styles

```jsx
const customStyle = {
  wrapper: {
    border: '2px red solid',
    width: '70%',
  },
  timeseriesContainer: {
    backgroundColor: '#efefef',
  },
};
```
      
<Preview>
  <Story name="Custom Styles">  
    <AssetTimeseriesPanel
      assetId={4650652196144007}
      styles={customStyle}
    />
  </Story>
</Preview>

### Custom TimeSeriesChartMeta

This component takes all optional props of TimeseriesChartMeta component. These props are passed to every instance of TimeseriesChartMeta in the list of timeseries. See TimeseriesChartMeta component for more details.

```jsx
const metaOptions = {
  defaultTimePeriod: 'lastYear',
  liveUpdate: false,
  showChart: true,
  showDescription: false,
  showDatapoint: true,
  showMetadata: false,
  showPeriods: true,
};
```
<Preview>
  <Story name="Custom Time Series Chart Meta">  
    <AssetTimeseriesPanel
      assetId={4650652196144007}
      {...metaOptions}
    />
  </Story>
</Preview>

### Load Callbacks

```jsx
import { GetTimeSeriesMetadataDTO } from '@cognite/sdk';

const handleAssetTimeseriesLoaded = (files: GetTimeSeriesMetadataDTO[]) => console.log(files);
```
<Preview>
  <Story name="Load Callback">  
    <AssetTimeseriesPanel
      assetId={4650652196144007}
      onAssetTimeseriesLoaded={handleAssetTimeseriesLoaded}
    />
  </Story>
</Preview>
