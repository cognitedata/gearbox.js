import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { AssetDetailsPanel } from '../AssetDetailsPanel';
import { AssetDetailsPanelPure } from '../AssetDetailsPanelPure';
import { decorators, onAssetLoaded, toCategory, customStyle, FakeAssetDetailsPanel } from './helper';

<Meta title="Assets|AssetDetailsPanel" decorators={decorators} />

# Asset Details Panel

This component loads meta information for an asset and presents it as a key/value list in a table with two columns.
The component is used as one of the panes in AssetMeta component.

**NOTE:** The component should have `ClientSDKProvider` as a parent component in react component tree.

### Basic usage:

Imports:

```jsx
import 'antd/dist/antd.css';

import React from 'react';
import { AssetDetailsPanel } from '@cognite/gearbox';
```

<Preview>
  <Story name="Basic Usage">
    <AssetDetailsPanel assetId={4518112062673878} />
  </Story>
</Preview>

## Available props

<Props of={FakeAssetDetailsPanel} />

### Types

`Asset` type can be imported from `@cognite/sdk`:

```js
import { Asset } from '@cognite/sdk';
```
## Examples

### Custom categories

```jsx
const toCategory = (name: string): string => name.split('_')[0];
```

<Preview>
  <Story name="Custom categories">
    <AssetDetailsPanel
      assetId={4650652196144007}
      toCategory={toCategory}
      categoryPriorityList={['SOURCE']}
    />
  </Story>
</Preview>

### Custom Loading Spinner

<Preview>
  <Story name="Custom Loading Spinner ">
    <AssetDetailsPanel
      assetId={4650652196144007}
      customSpinner={<div>Loading...</div>}
    />
  </Story>
</Preview>

### Custom Styles

```jsx
const customStyle: React.CSSProperties = {
  border: '1px solid red',
};
```
<Preview>
  <Story name="Custom Styles">  
    <AssetDetailsPanel
      assetId={4650652196144007}
      styles={customStyle}
    />
  </Story>
</Preview>

### Handle callbacks

A callback function can be provided to fire when the asset is loaded:

```jsx
import { Asset } from '@cognite/sdk';

const onAssetLoaded = (asset: Asset) => console.log(asset);
```

<Preview>
  <Story name="Load Callback">  
    <AssetDetailsPanel
      assetId={4650652196144007}
      onAssetLoaded={onAssetLoaded}
    />
  </Story>
</Preview>
